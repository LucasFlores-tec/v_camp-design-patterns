package br.com.virtualoutletstore.observer.backoffice;

import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.ErrorCollector;

import br.com.virtualoutletstore.composite.cart.Cart;
import br.com.virtualoutletstore.facade.order.Order;
import br.com.virtualoutletstore.iterator.orderlist.OrderList;

public class RenderOrderListTest {
	
	private Order order1;
	private Order order2;
	private Order order3;
	private Order order4;
	
	private Cart cart1;
	private Cart cart2;
	private Cart cart3;
	private Cart cart4;
	
	private  Backoffice addOrderObserver;
	
	@Rule
	public ErrorCollector error = new ErrorCollector();
	
	@Test
	public void renderOrderListWhenAddingNewOrderToTheOrderListTest() {
		// Scenario
		cart1 = new Cart();
		cart2 = new Cart();
		cart3 = new Cart();
		cart4 = new Cart();
		order1 = new Order(cart1, cart1.getShipping(),"paid");
		order2 = new Order(cart2, cart2.getShipping(),"paid");
		order3 = new Order(cart3, cart3.getShipping(),"paid");
		order4 = new Order(cart4, cart4.getShipping(),"paid");
		addOrderObserver = new Backoffice();
		OrderList.getInstanceOfOrderList().addOrderToTheOrdersList(order1);
		OrderList.getInstanceOfOrderList().addOrderToTheOrdersList(order2);
		OrderList.getInstanceOfOrderList().addOrderToTheOrdersList(order3);
		
		// Action
		OrderList.getInstanceOfOrderList().attachObserver(addOrderObserver);
		OrderList.getInstanceOfOrderList().addOrderToTheOrdersList(order4);
		
		addOrderObserver.renderOrderList(OrderList.getInstanceOfOrderList());
		
		// Verification
		
	}
}
