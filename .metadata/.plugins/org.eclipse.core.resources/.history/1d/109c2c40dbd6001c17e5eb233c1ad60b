package br.com.virtualoutletstore.builder.catalog;

import static org.hamcrest.CoreMatchers.equalTo;
import static org.hamcrest.CoreMatchers.is;
import static org.junit.Assert.assertEquals;

import org.hamcrest.CoreMatchers;
import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.ErrorCollector;

public class CatalogTest {
	
	@Rule
	public ErrorCollector error = new ErrorCollector();

	@Test
	public void addProductsToCatalogTest() {
		// Scenario
		Catalog catalog = new Catalog();
		
		// Action
		catalog.addProductToCatalog("book");
		catalog.addProductToCatalog("tshirt");
		catalog.addProductToCatalog("ssdcard");
		catalog.addProductToCatalog("mouse");
		
		// Verification
		error.checkThat(catalog.getAllProducts().get(0).getSku(), is(equalTo(1)));
		assertEquals(200.0, catalog.getAllProducts().get(0).getPrice(), 0.01);
		assertEquals(0.350, catalog.getAllProducts().get(0).getWeight(), 0.001);
		assertEquals("Robert C. Martin; Michael C. Feathers; Timothy R. Ottinger", catalog.getAllProducts().get(0).getBook().getAuthor());
		assertEquals("Clean Code: A Handbook of Agile Software Craftsmanship", catalog.getAllProducts().get(0).getBook().getTitle());

		assertEquals(2, catalog.getAllProducts().get(1).getSku());
		assertEquals(50.0, catalog.getAllProducts().get(1).getPrice(), 0.01);
		assertEquals(0.100, catalog.getAllProducts().get(1).getWeight(), 0.001);
		assertEquals("Black", catalog.getAllProducts().get(1).getTshirt().getColor());
		assertEquals("G", catalog.getAllProducts().get(1).getTshirt().getSize());

		assertEquals(3, catalog.getAllProducts().get(2).getSku());
		assertEquals(350.0, catalog.getAllProducts().get(2).getPrice(), 0.01);
		assertEquals(0.50, catalog.getAllProducts().get(2).getWeight(), 0.01);
		assertEquals("Kingston", catalog.getAllProducts().get(2).getSsdcard().getBrand());
		assertEquals(480, catalog.getAllProducts().get(2).getSsdcard().getGigabytes());

		assertEquals(4, catalog.getAllProducts().get(3).getSku());
		assertEquals(80.0, catalog.getAllProducts().get(3).getPrice(), 0.01);
		assertEquals(0.50, catalog.getAllProducts().get(3).getWeight(), 0.01);
		assertEquals("Logitech", catalog.getAllProducts().get(3).getMouse().getBrand());
		assertEquals("Bluetooth", catalog.getAllProducts().get(3).getMouse().getType());
	}
	
}